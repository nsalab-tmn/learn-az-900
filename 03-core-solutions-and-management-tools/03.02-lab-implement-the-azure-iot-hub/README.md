# Внедрение Центра Интернета вещей Azure

В этом пошаговом руководстве мы настроим новый Центр Интернета вещей Azure на портале Azure, а затем проверим подлинность подключения к устройству Интернета вещей с помощью онлайн-симулятора устройства Raspberry Pi. Данные датчиков и сообщения передаются из симулятора Raspberry Pi в ваш Центр Интернета вещей Azure, и вы просматриваете метрики по обмену сообщениями на портале Azure.

## Задача 1. Создание центра Интернета вещей

В рамках этой задачи мы создадим центр Интернета вещей.

1. Войдите на [портал Azure](https://portal.azure.com).

2. В колонке **Все службы** найдите и выберите элемент **Центр Интернета вещей**, а затем щелкните **+ Добавить, + Создать, + Новый**.

3. На вкладке **Основные** колонки **Центр Интернета вещей** укажите в полях следующие сведения (замените **xxxx** в имени учетной записи хранения буквами и цифрами, чтобы имя было глобально уникальным):

    | Параметры | Значение |
    |--|--|
    | Подписка | **Сохранить предоставленное по умолчанию** |
    | Группа ресурсов | **rg-lab07-#####** |
    | Регион | **Восточная часть США** |
    | Имя центра Интернета вещей | **my-hub-groupxxxxx** |

    **Примечание.** -  Не забудьте заменить символы **xxxxx**, чтобы **Имя центра Интернета вещей** стало уникальным.

4. Перейдите на вкладку **Управление** и используйте раскрывающийся список, чтобы установить для параметра **Ценовая категория и категория масштабирования** значение **S1: Уровень «Стандартный»**.

5. Нажмите кнопку **Просмотр и создание**.

6. Нажмите кнопку **Создать**, чтобы начать создание экземпляра Центра Интернета вещей Azure.

7. Дождитесь развертывания экземпляра Центра Интернета вещей Azure.

## Задача 2. Добавление устройства Интернета вещей

В рамках этой задачи мы добавим устройство Интернета вещей в центр Интернета вещей.

1. После завершения развертывания щелкните **Перейти к ресурсу** в колонке развертывания. Либо в колонке **Все службы** найдите и выберите элемент **Центр Интернета вещей** и найдите свой новый экземпляр Центра Интернета вещей.

	![Снимок экрана: уведомления о выполняемом и успешном развертывании на портале Azure.](./assets/0601.png)

2. Чтобы добавить новое устройство Интернета вещей, прокрутите вниз до раздела **Обозреватели** и щелкните **Устройства Интернета вещей**. Затем щелкните **+ Добавить, + Создать, + Новый**.

	![Снимок экрана: панель устройств Интернета вещей, выделенная в колонке навигации центра Интернета вещей, на портале Azure. Кнопка "Создать" выделена, чтобы показать, как добавить новое удостоверение устройства Интернета вещей в центр Интернета вещей.](./assets/0602.png)

3. Введите имя для своего нового устройства Интернета вещей — **myDeviceID** — и нажмите кнопку **Сохранить**. При этом будет создано удостоверение устройства Интернета вещей в вашем Центре Интернета вещей Azure.

4. Если вы не видите свое новое устройство, нажмите кнопку **Обновить** для обновления страницы "Устройства Интернета вещей".

5. Выберите **myDeviceID** и скопируйте значение **Первичная строка подключения**. Вы будете использовать этот ключ в следующей задаче для проверки подлинности подключения к симулятору Raspberry Pi.

	![Снимок экрана: страница "Основная строка подключения" с выделенным значком копирования.](./assets/0603.png)

## Задача 3. Тестирование устройства с помощью симулятора Raspberry Pi

В рамках этой задачи мы протестируем устройство с помощью симулятора Raspberry Pi.

1. Откройте в веб-браузере новую вкладку и введите эту ссылку на ярлык https://aka.ms/RaspPi. Она позволит вам перейти на веб-сайт симулятора Raspberry Pi. Если у вас есть время, почитайте сведения о симуляторе Raspberry Pi. Когда закончите, выберите «**X**», чтобы закрыть всплывающее окно.

2. В области кода справа найдите строку с 'const connectionString ='. Замените ее строкой подключения, скопированной на портале Azure. Обратите внимание, что строка подключения включает в себя записи DeviceId (**myDeviceID**) и SharedAccessKey.

	![Снимок экрана: область написания кода в симуляторе Raspberry Pi.](./assets/0604.png)

3. Щелкните **Выполнить** (под областью кода), чтобы запустить приложение. В выходных данных консоли должны отображаться данные датчиков и сообщения, отправляемые симулятором Raspberry Pi в ваш Центр Интернета вещей Azure. Данные и сообщения отправляются каждый раз, когда мигает светодиод симулятора Raspberry Pi.

	![Снимок экрана: консоль симулятора Raspberry Pi.  В выходных данных консоли отображаются данные датчиков и сообщения, отправляемые симулятором Raspberry Pi в ваш Центр Интернета вещей Azure.](./assets/0605.png)

5. Нажмите кнопку **Остановить**, чтобы прекратить отправку данных.

6. Вернитесь на портал Microsoft Azure.

7. Переключитесь на колонку **Обзор** Центра Интернета вещей и прокрутите вниз до пункта с информацией **Использование Центра Интернета вещей**, чтобы ознакомиться с порядком его использования. Измените свой временной интервал в поле **отображения последних данных**, чтобы просмотреть данные за последний час.

	![Снимок экрана: метрики в области использования Центра Интернета вещей на портале Azure.](./assets/0606.png)


Поздравляем! Вы настроили Центр Интернета вещей Azure для сбора данных датчиков с устройства Интернета вещей.
