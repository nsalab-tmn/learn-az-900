# Инструменты управления Azure

С помощью средств управления Azure администраторы, разработчики и менеджеры могут взаимодействовать с облачной средой для выполнения таких задач, как:

- Развертывание десятков или сотен ресурсов одновременно.

- Настройка отдельных сервисов программным путем.

- Просмотр отчетов по использованию, работоспособности, затратам и многому другому.

Microsoft Azure предоставляет набор параметров средств управления на выбор в зависимости от ситуации. 

На высоком уровне существуют две широкие категории инструментов управления: визуальные инструменты и инструменты на основе кода.

Визуальные инструменты обеспечивают полный, визуально удобный доступ ко всем функциям Azure. Однако визуальные инструменты могут быть менее полезными при попытке настроить большое развертывание ресурсов с взаимозависимостями и параметрами конфигурации. 

Когда вы пытаетесь быстро настроить ресурсы Azure, лучше всего использовать средство на основе кода. Хотя сначала может потребоваться время, чтобы понять правильные команды и параметры, после того, как они были введены, их можно сохранить в файлы и использовать многократно, по мере необходимости. Кроме того, код, который выполняет установку и настройку, может храниться, версионироваться и поддерживаться вместе с исходным кодом приложения в инструменте управления исходным кодом, таком как как Git. Такой подход к управлению оборудованием и облачными ресурсами, который разработчики используют при написании кода приложения, называется *инфраструктура-как-код*.

Существует два подхода к инфраструктуре как коду: императивный код и декларативный код. Императивный код детализирует каждый отдельный шаг, который должен быть выполнен для достижения желаемого результата. Напротив, декларативный код детализирует только желаемый результат, и он позволяет интерпретатору решить, как наилучшим образом достичь этого результата. Это различие важно, поскольку инструменты, основанные на декларативном коде, могут обеспечить более надежный подход к развертыванию десятков или сотен ресурсов одновременно и надежно.

## Портал Azure 

С помощью портала Azure, веб-интерфейса пользователя, вы можете получить доступ практически ко всем функциям Azure. Портал Azure предоставляет удобный графический пользовательский интерфейс для просмотра всех служб, которые вы используете, создания новых служб, настройки служб и просмотра отчетов. Портал Azure — это то, как большинство пользователей впервые сталкиваются с Azure. Но по мере роста использования Azure вы, скорее всего, выберете более повторяемый подход к управлению ресурсами Azure, ориентированный на код. 

## Мобильные приложения Azure

Мобильные приложения Azure предоставляют доступ iOS и Android к ресурсам Azure, когда вы находитесь удаленно от компьютера. С его помощью вы можете: 

- Осуществлять мониторинг работоспособности и состояния ресурсов Azure.

- Проверять наличие предупреждений, быстро диагностировать и устранять проблемы, а также перезапускать веб-приложение или виртуальную машину (VM).

- Выполнять команды Azure CLI или Azure PowerShell для управления ресурсами Azure . 

## Azure PowerShell

Azure PowerShell — это оболочка, с помощью которой разработчики, DevOps и ИТ-специалисты могут выполнять наборы команд. Эти команды вызовут API rest Azure для выполнения всех возможных задач управления в Azure. Наборы команд могут быть выполнены независимо или объединены в файл сценария и выполнены вместе для оркестровки:

- Рутинная настройка, демонтаж и обслуживание одного ресурса или нескольких подключенных ресурсов.

- Развертывание целой инфраструктуры, которая может содержать десятки или сотни ресурсов, из императивного кода.
 
Выполнение команд в скрипте делает процесс повторяемым и автоматизируемым.

Azure PowerShell доступен для Windows, Linux и Mac, и вы можете получить к нему доступ в веб-браузере через Azure Cloud Shell. 

Windows PowerShell помогает ИТ-организациям, ориентированным на Windows, автоматизировать многие из своих локальных операций в течение многих лет, и эти организации создали большой каталог пользовательских сценариев. 

## Azure CLI

Интерфейс командной строки Azure CLI — это исполняемая программа, с помощью которой разработчик,специалист DevOps или ИТ-специалист может выполнять команды в Bash. Команды вызовут API rest Azure для выполнения всех возможных задач управления в Azure. Команды можно выполнять независимо или в сочетании со сценарием и выполнять их вместе для рутинной настройки, демонтажа и обслуживания одного ресурса или всей среды.

Во многих отношениях Azure CLI почти идентичен Azure PowerShell в том, что вы можете с ним делать. Оба работают на Windows, Linux и Mac и могут быть доступны в веб-браузере через Cloud Shell. Основное различие заключается в синтаксисе, который вы используете. Если вы уже владеете PowerShell или Bash, вы можете использовать предпочитаемое средство.

## Шаблоны ARM

Хотя можно написать императивный код в Azure PowerShell или Azure CLI для настройки и демонтажа одного ресурса Azure или оркестровки инфраструктуры, состоящей из сотен ресурсов, есть лучший способ реализовать эту функциональность.

С помощью шаблонов Azure Resource Manager (шаблонов ARM) можно описать ресурсы, которые вы хотите использовать, в декларативном формате JSON. Преимущество заключается в том, что весь шаблон ARM проверяется перед выполнением любого кода, чтобы убедиться, что ресурсы будут созданы и подключены правильно. Затем шаблон организует создание этих ресурсов параллельно. То есть, если вам нужно 50 экземпляров одного ресурса, все 50 экземпляров создаются одновременно. 

В конечном счете, разработчику, специалисту DevOps или ИТ-специалисту нужно только определить желаемое состояние и конфигурацию каждого ресурса в шаблоне ARM, а далее шаблон делает все остальное. Шаблоны могут даже выполнять сценарии PowerShell и Bash до или после настройки ресурса. 

## Анализ критериев принятия решений

В этом разделе вы проанализируете критерии, используемые экспертами, чтобы помочь им решить, какие средства управления Azure использовать для удовлетворения их бизнес-потребностей. Понимание критериев может помочь вам лучше понять нюансы различий между продуктами. 

### Вам нужно выполнить разовые действия по управлению, администрированию или отчетности? 

Azure PowerShell и Azure CLI — это средства управления Azure, которые позволяют быстро получить IP-адрес развернутой виртуальной машины, перезагрузить виртуальную машину или масштабировать ее. Возможно, вы захотите сохранить пользовательские сценарии для обоих инструментов под рукой на локальном жестком диске для определенных операций, которые необходимо выполнить несколько раз. 

В отличие от Azure CLI и PowerShell, шаблоны Azure Resource Manager (шаблоны ARM) определяют требования к инфраструктуре в приложении для повторяемых развертываний. Хотя шаблоны ARM не предназначены для разовых сценариев, их можно использовать для этой цели. Однако для одноразовых сценариеввы можете предпочесть более гибкие средства, такие как PowerShell, сценарии Azure CLI или портал Azure. 

Имейте в виду, что шаблоны ARM могут включать как PowerShell, так исценарии Azure CLI, что даст вам возможность использовать сценарии для задач, которые могут не быть возможно с самим шаблоном ARM. Возможность комбинировать средства управления Azure обеспечивает гибкость в выборе правильных инструментов для ваших конкретных потребностей.

Портал Azure может выполнять большинство, если не все, управленческие и административные действия. Если вы только изучаете Azure и/или вам нужно настраивать ресурсы и управлять ими нечасто (или вы предпочитаете визуальный интерфейс для просмотра отчетов), это имеет смысл, чтобы воспользоваться преимуществами визуальной презентации, которую предлагает портал Azure. 

Однако, если вы находитесь в роли администратора или администратора облака, менее эффективно полагаться исключительно на визуальное сканирование и щелчок. Чтобы быстро найти параметры и сведения, с помощью которых вы хотите работать, Azure CLI или PowerShell обеспеча наибольшую гибкость для повторяемых задач.

Последним инструментом управления для обсуждения является мобильное приложение Azure, к которому вы можете получить доступ через телефон или планшет iOS или Android. Поскольку он полнофункциональный, это, вероятно, лучший выбор, когда ноутбук недоступен, и вам нужно немедленно просмотреть и отортировать проблемы. 

### Вам нужен способ многократной настройки одного или нескольких повторных источников и обеспечения того, чтобы все зависимости создавались в правильном порядке? 

Шаблоны ARM определяют требования к инфраструктуре приложения для повторяемого развертывания, которое выполняется согласованным образом. Шаг проверки гарантирует, что все ресурсы могут быть созданы в правильном порядке на основе зависимостей.

В отличие от этого, можно использовать PowerShell или Azure CLI для настройки всех ресурсов для развертывания. Однако в этих инструментах нет шага проверки. Если сценарий прерывается с ошибкой, зависимые ресурсы не откатываются. Развертывание происходит последовательно.

### Когда вы работаете над сценарием, вы имеете опыт работы с рекламой Windows или администрирование Linux? 

Если вы или ваши администраторы облака имеете опыт работы администрирования Windows, скорее всего, вы предпочтете PowerShell. Если вы или ваши облачные администраторы имеют опыт администрирования Linux, скорее всего, вы предпочтете Azure CLI. На практике любой инструмент может быть использован для выполнения большинства одноразовых задач администрирования. 
